---
title: '[STAT] 가설검정'
tags: 통계 가설검정
---


데이터 분석에서 실험이나 관찰 이전에 가설을 세우고, 그 가설이 옳은지를 검증하는 작업은 대상을 이해하는 데 있어 중요한 과정이다. 예를 들어, "새로 송출한 광고가 상품 매출을 늘렸다."라는 가설을 세우고, 이를 검증함으로써 광고 효과의 여부를 밝힐 수 있다.

이처럼 미리 세운 가설을 검증하는 접근법을 **확증적 자료분석** 또는 **가설검정형 데이터 분석**이라 한다. 반대로 가설을 미리 세우지 않고, 전체 데이터를 탐색적으로 해석하는 접근법을 **탐색적 자료분석**이라 한다. 이는 데이터의 특징이나 경향을 파악하거나, 가설 후보를 찾는 것을 목적으로 하는 데이터 분석이다.

본 글에서 다룰 내용은 **확증적 자료분석**에 기반함을 참고하자.

## 통계적 유의성

어떤 실험 결과가 확률적 관점에서 단순한 우연이라 생각되지 않을 정도로 의미가 있음을 나타내는 지표로, 모집단에 대한 가설이 가지는 통계적 의미를 뜻한다.

**추정**과 **가설검정**과 같은 통계적 추론 시 사용된다.

## 가설검정

**가설검정**은 모집단의 특성에 대한 통계적 가설을 모집단으로부터 추출한 표본을 사용하여 비교/검토하는 통계적인 추론으로 정의된다. 통계적인 유의성을 검정하는 것으로 **유의성 검토**(**significance test**)라고도 한다.

검정에서 대상이 되는 집단은 일반적으로 2개 혹은 그 이상이 될 수 있다. 통계학에서는 특정 동일 조건인 집단을 **군**(**group**)이라고 한다. 어떠한 조치를 취한 집단을 **실험군**(**treatment group**), 실험군과 비교/대조를 위해 마련한 집단을 **대조군**(**control group**)이라 부른다.

### 귀무가설과 대립가설

가설검정에서는 밝히고자 하는 가설의 부정 명제를 **귀무가설**(**null hypothesis**)이라 하고, 밝히고 싶은 가설을 **대립가설**(**alternative hypothesis**)이라 한다. 일반적으로 주장하고자 하는 가설은 현재까지 받아들여지던 사실과 반대되기 때문에, 연구자는 귀무가설을 기각시키고 자신의 주장인 대립가설을 채택하고자 시도한다.

예를 들면 다음과 같다.

- 귀무가설 : "새로 송출한 광고는 상품 매출 증대에 효과가 없다."
- 대립가설 : "새로 송출한 광고는 상품 매출 증대에 효과가 있다."

가설검정에서는 상정한 가설, "광고가 효과가 있다"를 확인하고자 그 부정 명제인 귀무가설을 세우고, 이 귀무가설이 틀렸음을 주장하는 것으로 대립가설을 지지한다는 흐름을 취한다. 귀류법과 닮은 논리라 할 수 있다.

단, 귀무가설과 대립가설에는 비대칭성이 있으므로, 대립가설을 부정하여 귀무가설을 지지하는 것은 불가하다.

귀무가설 중 모수의 값 하나만을 설정하는 방법을 **단순가설**, 모수가 속하는 범위를 설정하는 방법을 **복합가설**이라 한다.

대립가설 중 귀무가설에서 설정한 통계량을 기준으로 어느 한쪽 범위를 포함하면 **단측대립가설**, 양쪽 범위를 포함하면 **양측대립가설**이라 한다.

### p-value

수집한 데이터가 귀무가설이 옳다고 가정한 환경에서는 얼마나 나타나기 쉬운가, 또는 어려운가를 평가하고자 p값(p-value, 유의확률)이라는 것을 계산한다. 정의는 다음과 같다.

- p-value : 귀무가설이 옳다고 가정했을 때 관찰한 값 이상으로 극단적인 값이 나올 확률

이 값이 작다는 것은, 귀무가설이 옳은 상황에서는 현실에서 얻은 데이터가 잘 나타나지 않는다는 뜻이다. 따라서 p값은 귀무가설과 현실 데이터 간의 괴리 정도를 평가하고 있다고 볼 수 있다. 

귀무가설을 기각할 것인지 채택할 것인지의 판단 경계로 이용하는 값을 **유의수준** $\alpha$라 정의한다. 일반적으로 보통 $\alpha=0.05$를 사용하지만, 분야에 따라 다른 값을 사용할 때도 있다.

<center><img src="https://github.com/hongjun7/log/blob/main/assets/2023-01-20/01.png?raw=true" width="600"></center>

따라서 p값이 $\alpha$ 이하인 경우, 귀무가설 하에서는 현실 데이터는 나타나기 어렵다고 생각하여 귀무가설을 기각하고 대립가설을 선택한다. 이 때, 통계량의 차이는 "**통게적으로 유의미한 차이가 있다**"라고 표현한다. 주의할 것은 이것이 대립가설이 절대적으로 옳다는 뜻이 아니라, 대립가설을 지지하는 하나의 증거를 얻었음을 의미한다는 점이다.

한편 p값이 $\alpha$ 초과인 경우, 귀무가설을 기각할 수 없으며 "**통계적으로 유의미한 차이는 발견하지 못했다**"라는 결과가 된다. 이것은 귀무가설이 옳다는 것이 아니라, 틀렸다고는 말할 수 없다는 뜻이라는 점에 유의한다. 다시 말해, 어느 명제가 옳은가의 판단은 보류하는 것이 된다.

### 검정통계량

  - 가설 검정에서 관찰된 표본으로부터 구하는 통계량으로 분포가 가설에서 주어지는 모수에 의존
  - 주어진 자료를 기초로 귀무가설에 대응하는 방식으로 표본의 값이 변함에 따라 그 값이 변하는 확률변수(예시: $Z$-분포, $t$-분포, $\chi^2$ 분포, $F$-분포)
  - 가설검정은 단일집단 모평균 및 모분산에 대한 것이 있고, 두 집단의 모평균 및 모분산에 대한 것이 있음. 검정통계량을 기준으로 정리하면 아래와 같음.
    - 단일집단 & 모평균 : $Z$-검정통계량, $t$-검정통계량
    - 단일집단 & 모분산 : $\chi^2$-검정통계량
    - 두 집단 & 모평균 : $Z$-검정통계량, $t$-검정통계량
    - 두 집단 & 모분산 : $F$-검정통계량

### 가설검정의 종류

- 양측검정(two-sided test) : 기각역을 검정통계량 분포의 좌우 양쪽으로 정하는 검정 방법
- 단측검정(one-sided test) : 기각역을 검정통계량 분포의 어느 한 쪽으로 정하는 검정 방법

### 가설검정의 절차
 1. 가설 설정
    - 검정하고자 하는 목적에 따라 귀무가설 $H_0$과 대립가설 $H_1$을 설정
 2. 검정통계량 결정
    - 검정통계량을 구하고 그 통계량의 분포를 계산
 3. 유의수준과 결정규칙 결정
    - 유의수준을 결정하고 검정통계량 분포에서 가설의 형태에 따라 유의수준에 해당하는 기각역을 설정
 4. 자료 수집 및 계산
    - 귀무가설이 옳다는 전제 하에서 표본관찰에 의한 검정통계량의 값을 구함
 5. 통계적 결론
    - 검정통계량의 값이 기각역에 속하면 $H_0$ 기각, 속하지 않으면 $H_0$ 채택

<center><img src="https://github.com/hongjun7/log/blob/main/assets/2023-01-20/02.png?raw=true" width="600"></center>    

### 신뢰구간과 가설검정의 관계

신뢰구간은 통계량의 **범위**에 초점을 맞추고, 가설검정은 **두 가설 중 선택**에 초점을 맞춘다. 이때 신뢰구간 및 가설검정에서 거리를 나타내는 표준편차는 정의가 동일하기 때문에 서로 같은 의미를 내포한다.

## References
- [KOCW: 통계적 유의성](http://contents.kocw.or.kr/contents4/document/lec/2013/Konkuk/Choijaeheon/6.pdf)
- [(soohee410) [기초통계학] 2편. 가설검정(+p-value, 유의수준 등)에 대한 직관 이해](https://soohee410.github.io/stat2)
- [빅데이터 시대, 올바른 인사이트를 위한 통계 101×데이터 분석, 아베 마사토](http://www.yes24.com/Product/Goods/114874176)